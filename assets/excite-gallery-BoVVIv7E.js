const p={barbie:{title:"芭比 (Spirit in the Alley)",sub:"粉色療癒・成長寓意",year:2022,duration:114,rating:6.8,match:"85% 興奮感",genres:["奇幻冒險","歡樂喜劇"],overview:"在芭比樂園裡，完美生活被一連串意外打亂，她踏上尋找自我的真實旅程…",cast:[{name:"瑪格羅比",role:"芭比",avatar:"https://picsum.photos/id/64/200/200"},{name:"伊莎貝",role:"芭比",avatar:"https://picsum.photos/id/1027/200/200"},{name:"萊恩葛斯林",role:"肯尼",avatar:"https://picsum.photos/id/1005/200/200"}],similar:[{title:"Joyful Day",img:"https://picsum.photos/id/1011/300/450"},{title:"Lilo & Stitch",img:"https://picsum.photos/id/1025/300/450"}]},ghost:{title:"午夜鬼影",year:2021,duration:98,rating:7.2,match:"92% 興奮感",genres:["驚悚"],overview:"…",cast:[],similar:[]},money:{title:"金錢遊戲",year:2020,duration:110,rating:7,match:"88% 興奮感",genres:["商戰","劇情"],overview:"…",cast:[],similar:[]},dance:{title:"舞力全開",year:2019,duration:105,rating:6.9,match:"90% 興奮感",genres:["音樂","青春"],overview:"…",cast:[],similar:[]},lee:{title:"李小龍致敬作",year:1973,duration:99,rating:8.2,match:"86% 興奮感",genres:["動作"],overview:"…",cast:[],similar:[]},alien:{title:"異形宇宙",year:2017,duration:122,rating:7.1,match:"84% 興奮感",genres:["科幻","驚悚"],overview:"…",cast:[],similar:[]}},i=document.getElementById("galleryModal"),y=document.getElementById("detailPoster"),v=document.getElementById("detailTitle"),h=document.getElementById("detailSub"),f=document.getElementById("metaYear"),g=document.querySelector("#metaDuration span"),E=document.querySelector("#metaRating span"),w=document.getElementById("detailMatch"),S=document.getElementById("detailMatchText"),L=document.getElementById("detailGenres"),$=document.getElementById("detailOverview"),r=document.getElementById("detailCast"),o=document.getElementById("detailSimilar"),b=document.getElementById("secCast"),q=document.getElementById("secSimilar"),C=i.querySelector(".modal__close");function s(t,e){t&&(t.textContent=e??"")}function m(t,e){t&&(t.style.display=e?"":"none")}function k(t=[]){r.innerHTML="",t.forEach(e=>{const a=document.createElement("div");a.className="person-card",a.innerHTML=`
      <img class="avatar" src="${e.avatar}" alt="${e.name}">
      <div class="name">${e.name||""}</div>
      <div class="role">${e.role||""}</div>`,r.appendChild(a)}),m(b,t.length>0)}function B(t=[]){o.innerHTML="",t.forEach(e=>{const a=document.createElement("div");a.className="movie-card",a.innerHTML=`
      <img class="poster" src="${e.img}" alt="${e.title}">
      <div class="mtitle">${e.title||""}</div>`,r.insertAdjacentElement,o.appendChild(a)}),m(q,t.length>0)}function I(t,e,a=""){const n=p[t]||{};y.src=n.poster||e||"",s(v,n.title||a||""),s(h,n.sub||""),s(f,n.year??""),s(g,n.duration?`${n.duration} 分鐘`:""),s(E,n.rating??""),s(w,n.match||""),s(S,n.match||""),s(L,(n.genres||[]).join("・")),s($,n.overview||""),k(n.cast),B(n.similar),i.classList.add("is-open"),i.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",setTimeout(()=>C.focus(),0)}function u(){i.classList.remove("is-open"),i.setAttribute("aria-hidden","true"),document.documentElement.style.overflow=""}i.addEventListener("click",t=>{t.target.matches("[data-close]")&&u()});window.addEventListener("keydown",t=>{t.key==="Escape"&&i.classList.contains("is-open")&&u()});new Swiper(".myCoverflow",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:!0,slidesPerView:3,speed:500,coverflowEffect:{rotate:0,stretch:0,depth:160,modifier:1,slideShadows:!1},breakpoints:{0:{slidesPerView:1.3,coverflowEffect:{depth:80}},576:{slidesPerView:2.2,coverflowEffect:{depth:120}},992:{slidesPerView:3,coverflowEffect:{depth:180}}}});const c=document.querySelector(".myCoverflow");c.addEventListener("click",t=>{const e=c.querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");if(!(e!=null&&e.contains(t.target)))return;const a=e.querySelector(".slide-img"),n=e.dataset.key;I(n,a==null?void 0:a.src,a==null?void 0:a.alt)});function T(){const e=document.querySelector(".myCoverflow").querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");return e==null?void 0:e.dataset.key}var l;(l=document.querySelector("[data-retry]"))==null||l.addEventListener("click",()=>{console.log("retry emotion capture")});var d;(d=document.querySelector("[data-addlist]"))==null||d.addEventListener("click",()=>{const t=T();t&&console.log("add to list:",t)});document.querySelectorAll(".myCoverflow .swiper-slide").forEach(t=>{var n;const e=t.dataset;if(t.querySelector(".slide-overlay"))return;const a=document.createElement("div");a.className="slide-overlay",a.innerHTML=`
    <h3 class="slide-title">${e.title||((n=t.querySelector(".slide-img"))==null?void 0:n.alt)||""}</h3>
    <div class="slide-meta">
      ${e.year?`<span class="pill">${e.year}</span>`:""}
      ${e.duration?`<span class="pill"><i class="bi bi-clock"></i>${e.duration} 分鐘</span>`:""}
      ${e.rating?`<span class="pill"><i class="bi bi-star"></i>${e.rating}</span>`:""}
    </div>
    <p class="slide-tags">
      ${e.match?`<span class="match">${e.match}</span>`:""} ${e.tags||""}
    </p>`,t.appendChild(a)});document.addEventListener("click",t=>{const e=t.target.closest("a.js-animate");if(!e||e.target==="_blank"||t.metaKey||t.ctrlKey)return;t.preventDefault();const a=e.href,n=document.querySelector(".phone-screen");if(!n){window.location.href=a;return}n.classList.add("page-leave"),setTimeout(()=>{window.location.href=a},450)});window.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".phone-screen");t&&t.classList.add("page-enter")});
